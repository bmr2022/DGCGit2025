@model eTactWeb.DOM.Models.CancelRequitionModel
@using Microsoft.AspNetCore.Http
@using System.Reflection.PortableExecutable
@inject IHttpContextAccessor HttpContextAccessor
@{
    var ActualEntryByEmpid = Convert.ToInt32(HttpContextAccessor.HttpContext.Session.GetString("EmpID"));
}

<table class="table table-hover table-bordered table-striped TbCss text-nowrap mb-0" id="ISTDashboard">
    <thead class="bg-gradient card-headerBG text-light">
        <tr>
            <th>Sr#</th>
            <th>Action<input type="checkbox" id="selectAll" /></th>
            <th data-columnno="1" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Req No
            </th>
            <th data-columnno="2" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Req Date
            </th>
            <th data-columnno="3" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Workcenter
            </th>
            <th data-columnno="4" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Department
            </th>
            <th data-columnno="5" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Seq No
            </th>
            <th data-columnno="6" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Part Code
            </th>
            <th data-columnno="7" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Item Name
            </th>
            <th data-columnno="8" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Req Qty
            </th>
            <th data-columnno="9" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Expected Date
            </th>
            <th data-columnno="10" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Pend Qty
            </th>
            <th data-columnno="11" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Unit
            </th>
            <th data-columnno="12" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Stock
            </th>
            <th data-columnno="13" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Store Name
            </th>
            <th data-columnno="14" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Item Remark
            </th>
            <th data-columnno="15" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Item Canceled
            </th>
            <th data-columnno="16" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Item Location
            </th>
            <th data-columnno="17" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Item Bin Rack No
            </th>
            <th data-columnno="18" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Remark
            </th>
            <th data-columnno="19" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Req By Emp
            </th>
            <th data-columnno="20" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Entry By Emp
            </th>
            <th data-columnno="21" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Branch
            </th>
            <th data-columnno="22" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Completed
            </th>
            <th data-columnno="23" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Entry By Machine Name
            </th>
            <th data-columnno="24" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Cancel
            </th>
            <th data-columnno="25" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Cancel Reason
            </th>
            <th data-columnno="26" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Req Entry ID
            </th>
            <th data-columnno="27" data-sortorder="asc" class="sortCol">
                <span style="padding:5px;margin:5px" class="sort-icon"><i class="fa" aria-hidden="true"></i></span> Req Year Code
            </th>


        </tr>
    </thead>
    <tbody id="DashboardGrid">
        @{
            var @Cntr = 0;
            if (Model.CancelRequitionGrid == null || Model.CancelRequitionGrid.Count == 0)
            {
                <tr class="text-center"><td colspan="26" class="text-black-50"><strong>NO DATA FOUND</strong></td></tr>
            }
            else
            {
                foreach (var item in Model.CancelRequitionGrid)
                {
                    Cntr = Cntr + 1;
                    <tr onclick="selection(this)">
                        <th>@Cntr</th>
                        <td class="action-col">
                            <div class="action-buttons">
                                <!-- View -->
                                <a class="btn-icon bg-success"
                                   asp-action="ControlPlan"
                                   asp-route-Mode="V"
                                 >
                                    <i class="fa fa-search"></i>
                                </a>

                                <!-- Edit -->
                                <a class="btn-icon bg-primary"
                                   asp-action="ControlPlan"
                                   onclick="confirmEdit(event)"
                                   asp-route-Mode="U"
                                 >
                                    <i class="fa fa-pencil"></i>
                                </a>

                               
                                <input type="checkbox" class="checkManual" data-entryid="@item.ReqEntryId" data-yearcode="@item.ReqYearCode" data-reqno="@item.ReqNo" data-requitiontype="@item.RequitionType" data-reporttype="@item.ReportType"  data-itemcode="@item.ItemCode" />
                            </div>
                        </td>

                        <td>@item.ReqNo</td>
                        <td>@(item.ReqDate == null ? string.Empty : item.ReqDate.Split(" ")[0])</td>
                        <td>@item.Workcenter</td>
                        <td>@item.Department</td>
                        <td>@item.SeqNo</td>
                        <td>@item.PartCode</td>
                        <td>@item.ItemName</td>
                       
                        <td>@item.ReqQty</td>
                        <td>@(item.ExpectedDate == null ? string.Empty : item.ExpectedDate.Split(" ")[0])</td>
                        <td>@item.PendQty</td>
                        <td>@item.Unit</td>
                        <td>@item.Stock</td>
                        <td>@item.StoreName</td>
                        <td>@item.ItemRemark</td>
                        <td>@item.ItemCanceled</td>
                        <td>@item.ItemLocation</td>
                        <td>@item.ItemBinRackNo</td>
                        <td>@item.Remarks</td>
                        <td>@item.ReqByEmp</td>
                        <td>@item.EntryByEmp</td>
                        <td>@item.Branch</td>
                        <td>@item.Completed</td>
                        <td>@item.EntryByMachineName</td>
                        <td>@item.Cancel</td>
                        <td>@item.CancelReason</td>
                        <td>@item.ReqEntryId</td>
                        <td>@item.ReqYearCode</td>

                    </tr>
                }
            }
        }
    </tbody>
</table>
<center><strong>TOTAL ROWS : <span id="totalRows"></span></strong></center>


<style>

    td.action-col, th.action-col {
        width: 1%;
        white-space: nowrap;
        text-align: center;
        padding: 0 2px;
    }

    .action-buttons {
        display: inline-flex;
        gap: 2px;
    }

    .btn-icon {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: 18px;
        height: 18px;
        border-radius: 3px;
        color: #fff;
        font-size: 12px;
        line-height: 1;
        text-decoration: none;
    }


    #DashboardGrid {
        background-color: blanchedalmond;
    }
</style>
