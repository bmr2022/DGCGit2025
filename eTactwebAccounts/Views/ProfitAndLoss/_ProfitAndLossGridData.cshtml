@model eTactWeb.DOM.Models.ProfitAndLossModel
@{
    var excludeColumns = new List<string> { "ParentAccountCode", "AccountCode", "PLseqNo" };
}

<div class="row">
    <!-- Debit Table -->
    <div class="col-md-6 p-0">
        <div class="card-body table-responsive" style="max-height:300px;overflow-y:auto;padding:0 !important">
            <table class="table table-hover table-bordered text-nowrap mb-0">
                <thead class="bg-gradient card-headerBG text-light" style="position:sticky; top:0; z-index:1;">
                    <tr>
                        <th>Sr#</th>
                        @foreach (var colName in Model.ProfitAndLossGrid.First().DynamicColumns.Keys)
                        {
                            if (!excludeColumns.Contains(colName) && colName.Contains("(Dr)"))
                            {
                                <th>@colName.Replace("(Dr)", "").Replace("(Cr)", "")</th>
                            }
                        }
                    </tr>
                </thead>
                <tbody style="background-color:lightblue">
                    @{
                        var drCounter = 0;
                        foreach (var row in Model.ProfitAndLossGrid
                        .Where(x => x.DynamicColumns["ProfitLossDRCRSide"]?.ToString() == "DR"))
                        {
                            drCounter++;
                            <tr>
                                <td>@drCounter</td>
                                @foreach (var col in row.DynamicColumns)
                                {
                                    if (!excludeColumns.Contains(col.Key) && col.Key.Contains("(Dr)"))
                                    {
                                        if (col.Key.Contains("Group(Dr)"))
                                        {
                                            <td style="cursor:pointer;color:blue;">@col.Value</td>
                                        }
                                        else
                                        {
                                            <td>@col.Value</td>
                                        }
                                    }
                                }
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
        <center>
            <strong>
                TOTAL ROWS : <span id="totalRows">
                    @Model.ProfitAndLossGrid.Where(x => x.DynamicColumns["ProfitLossDRCRSide"]?.ToString() == "DR").Count()
                </span>
            </strong>
        </center>
    </div>

    <!-- Credit Table -->
    <div class="col-md-6 p-0">
        <div class="card-body table-responsive" style="max-height:300px;overflow-y:auto;padding:0 !important">
            <table class="table table-hover table-bordered text-nowrap mb-0">
                <thead class="bg-gradient card-headerBG text-light" style="position:sticky; top:0; z-index:1;">
                    <tr>
                        <th>Sr#</th>
                        @foreach (var colName in Model.ProfitAndLossGrid.First().DynamicColumns.Keys)
                        {
                            if (!excludeColumns.Contains(colName) && colName.Contains("(Cr)"))
                            {
                                <th>@colName.Replace("(Dr)", "").Replace("(Cr)", "")</th>
                            }
                        }
                    </tr>
                </thead>
                <tbody style="background-color:#b1c9ec">
                    @{
                        var crCounter = 0;
                        foreach (var row in Model.ProfitAndLossGrid
                        .Where(x => x.DynamicColumns["ProfitLossDRCRSide"]?.ToString() == "CR"))
                        {
                            crCounter++;
                            <tr>
                                <td>@crCounter</td>
                                @foreach (var col in row.DynamicColumns)
                                {
                                    if (!excludeColumns.Contains(col.Key) && col.Key.Contains("(Cr)"))
                                    {
                                        if (col.Key.Contains("Group(Cr)"))
                                        {
                                            <td style="cursor:pointer;color:blue;">@col.Value</td>
                                        }
                                        else
                                        {
                                            <td>@col.Value</td>
                                        }
                                    }
                                }
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
        <center><strong>TOTAL ROWS : <span id="totalRows">@Model.ProfitAndLossGrid.Where(x => x.DynamicColumns["ProfitLossDRCRSide"]?.ToString() == "CR").Count()</span></strong></center>
    </div>
</div>

<style>
    .header-icons {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .hidden-column {
        display: none !important;
    }

    .sort-icon, .toggle-col {
        cursor: pointer;
    }

    .sort-icon {
        padding: 5px;
        margin: 5px;
        vertical-align: top;
    }

    .ascCol {
        font-size: 15px;
        vertical-align: bottom;
    }

    .descCol {
        font-size: 15px;
        vertical-align: super;
    }

    #dashRThead th {
        background-color: #127387;
        position: sticky;
        top: -18px;
        z-index: 1;
    }

</style>